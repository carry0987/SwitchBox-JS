!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).switchBoxjs={})}(this,(function(e){"use strict";const t={title:null,bindLabel:!0,checked:!1,checkedByValue:null,disabled:!1,disabledByValue:null,styles:{},theme:"blue",onLoad:void 0,onChecked:void 0,onUnchecked:void 0,onChange:void 0};function i(e){throw new Error(e)}function n(e,t,i){if("string"!=typeof e)return e;let n=document;return null===t&&i?n=i:t&&t instanceof Node&&"querySelector"in t?n=t:i&&i instanceof Node&&"querySelector"in i&&(n=i),"all"===t?n.querySelectorAll(e):n.querySelector(e)}function s(e,t={},i=""){let n=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return i&&(n.textContent=i),n}let o="utils-style";const l={from:".utils",to:".utils-"};function a(e){return"object"==typeof e&&null!==e&&!c(e)}function c(e){return Array.isArray(e)}function h(e){return"number"!=typeof e&&("string"==typeof e&&0===e.length||(!(!c(e)||0!==e.length)||(!(!a(e)||0!==Object.keys(e).length)||!e)))}function r(e,...t){if(!t.length)return e;const i=t.shift();if(i)for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t],s=t;a(n)||c(n)?(e[s]&&"object"==typeof e[s]||(e[s]=c(n)?[]:{}),r(e[s],n)):e[s]=n}return r(e,...t)}function d(e){o=e}function u(e,t){l.from=e,l.to=t}function b(e,t=null){t=h(t)?"":t;let i=s("style");i.id=o+t,i.textContent="",document.head.append(i);let n=i.sheet;for(let i in e)e.hasOwnProperty(i)&&f(n,i,p(e[i]),t)}function p(e){let t="";for(let[i,n]of Object.entries(e))i=i.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${i}:${n};`;return t}function f(e,t,i,n=null){n=h(n)?"":n;let s=t.replace(l.from,l.to+n);e.insertRule(s+"{"+i+"}",0)}function g(e=null){const t=h(e)?"":e;let i=n("#"+o+t);i&&i.parentNode&&i.parentNode.removeChild(i)}function y(e=8){let t="";const i="abcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++){t+=i[Math.floor(36*Math.random())]}return t}class k{static setStylesheetId=d;static setReplaceRule=u;static isEmpty=h;static deepMerge=r;static generateRandom=y;static injectStylesheet=b;static removeStylesheet=g;static getElem=n;static createElem=s;static throwError=i;static getTemplate=function(e,t){return`\n        <div class="switch-box switch-box-${e=e.toString()}">\n            <div class="switch switch-${t}">\n                <span class="switch-style switch-trigger"></span>\n            </div>\n            <label class="switch-title"></label>\n        </div>\n        `};static handleSwitchboxTitle(e,t){let i,n=e.title||e.dataset.switchboxTitle||null,s=!1,o=null,l=!1;if(t instanceof HTMLLabelElement){const a=t.htmlFor,c=t.dataset.switchFor,r=e.dataset.switchId;s=!h(e.id)&&a===e.id,l=!h(e.id)&&c===e.id,l||h(e.name)||(l=!h(c)&&c===e.name),h(r)||c!==r||(o=h(e.id)&&h(a)?"switch-"+y(6):null,l=!0),(l||s)&&(i=t.cloneNode(!0),n=n||t.textContent,t.parentNode?.removeChild(t))}return{title:n,remainLabel:s,randomID:o,labelToRestore:i}}static insertSwitchbox(e,t,i,o,l){let a=k.getTemplate(e,t),c=s("div");c.innerHTML=a.trim();let h=n(".switch",c),r=n(".switch-trigger",c),d=n("label",c),u=i.cloneNode(!0);return u.withID=!0,o&&(u.id=o,u.withID=!1),!0===l&&(d.htmlFor=u.id),r.addEventListener("click",(e=>{e.preventDefault(),u.click()})),h.insertBefore(u,h.firstChild),i.parentNode.replaceChild(c.firstElementChild||c,i),{cloneEle:u,templateNode:c,labelNode:d}}static insertSwitchboxTitle(e,t,i,n){e?(i.textContent=e,!0===t&&(i.classList.add("switch-box-labeled"),i.addEventListener("click",(e=>{e.preventDefault(),n.click()})))):i.parentNode.removeChild(i)}static toggleCheckStatus(e,t){t?(e.checked=!0,e.setAttribute("checked","checked")):(e.checked=!1,e.removeAttribute("checked"))}static toggleDisableStatus(e,t){t?(e.disabled=!0,e.setAttribute("disabled","disabled")):(e.disabled=!1,e.removeAttribute("disabled"))}static restoreElement(e){if("function"==typeof e.switchBoxChange&&e.removeEventListener("change",e.switchBoxChange),!1===e.withID&&e.removeAttribute("id"),e.switchBoxChange=void 0,e.removeAttribute("data-switchbox"),e.parentNode&&e.parentNode.parentNode){let t=e.parentNode;t=t.parentNode,t.replaceWith(e)}let t=e.labelToRestore;t&&t.nodeType===Node.ELEMENT_NODE&&e.parentNode?.insertBefore(t,e.nextSibling)}}k.setStylesheetId("switchbox-style"),k.setReplaceRule(".switch-box",".switch-box-");class m{static instances=[];static version="2.1.1";static firstLoad=!0;length=0;options=t;id=0;allElement=[];onLoadCallback;onCheckedCallback;onUncheckedCallback;onChangeCallback;constructor(e,t){this.init(e,t,m.instances.length),m.instances.push(this),1===m.instances.length&&!0===m.firstLoad&&((e,t=!1)=>{!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)})(`SwitchBox is loaded, version: ${m.version}`),m.firstLoad=!1}init(e,i,n){let s=null;return"string"==typeof e?s=k.getElem(e,"all"):e instanceof NodeList||e instanceof Array?s=e:e instanceof HTMLInputElement&&(s=[e]),s?(this.length=s.length,this.id=n,this.options=k.deepMerge({},t,i),this.injectStyles(),this.setupCallbacks(),s.forEach(((e,t)=>this.processSwitchbox(e,t))),this.onLoadCallback?.(this),this):k.throwError("Cannot find elements : "+e)}injectStyles(){let e={};this.options?.styles&&Object.keys(this.options.styles).length>0&&(e=k.deepMerge({},this.options.styles,e)),e&&k.injectStylesheet(e,this.id.toString())}setupCallbacks(){this.onChange=(e,t)=>{this.options?.onChange&&this.options.onChange(e,t)},this.onChecked=e=>{this.options?.onChecked&&this.options.onChecked(e)},this.onUnchecked=e=>{this.options?.onUnchecked&&this.options.onUnchecked(e)},this.onLoadCallback=this.options?.onLoad}processSwitchbox(e,t){if("checkbox"!==e.type)return;if(e.hasAttribute("data-switchbox"))return;e.setAttribute("data-switchbox","true");let i=e.nextElementSibling,n=this.options.bindLabel??!1,{title:s,remainLabel:o,randomID:l,labelToRestore:a}=k.handleSwitchboxTitle(e,i);n=!!o||n,1===this.length&&(s=s||this.options.title||null),e.checked?k.toggleCheckStatus(e,!0):(this.options.checkedByValue&&Array.isArray(this.options.checkedByValue)&&this.options.checkedByValue.includes(e.value)&&k.toggleCheckStatus(e,!0),null!==this.options.checked&&this.updateSwitchboxCheckedStatus(e,t)),e.disabled?k.toggleDisableStatus(e,!0):(this.options.disabledByValue&&Array.isArray(this.options.disabledByValue)&&this.options.disabledByValue.includes(e.value)&&k.toggleDisableStatus(e,!0),null!==this.options.disabled&&this.updateSwitchboxDisabledStatus(e,t));let{cloneEle:c,labelNode:h}=k.insertSwitchbox(this.id.toString(),this.options.theme,e,l,o);k.insertSwitchboxTitle(s,n,h,c);let r=this.switchBoxChange.bind(this,c);c.addEventListener("change",r),c.switchBoxChange=r,this.allElement.push(c),c.labelToRestore=a}updateSwitchboxCheckedStatus(e,t){const i=this.options.checked;(!0===i&&1===this.length||"string"==typeof i&&e.value===i||"number"==typeof i&&t===i||Array.isArray(i)&&(i.includes(e.name)||i.includes(e.id)))&&k.toggleCheckStatus(e,!0)}updateSwitchboxDisabledStatus(e,t){const i=this.options.disabled;(!0===i&&1===this.length||"string"==typeof i&&e.value===i||"number"==typeof i&&t===i||Array.isArray(i)&&(i.includes(e.name)||i.includes(e.id)))&&k.toggleDisableStatus(e,!0)}switchBoxChange(e){k.toggleCheckStatus(e,e.checked),this.onChangeCallback?.(e,e.checked),e.checked?this.onCheckedCallback?.(e):this.onUncheckedCallback?.(e)}destroy(){m.firstLoad=!1,this.allElement.forEach((e=>{k.restoreElement(e)})),this.length=0,this.options=t,this.allElement=[],k.removeStylesheet(this.id.toString());const e=m.instances.indexOf(this);-1!==e&&m.instances.splice(e,1)}set onChange(e){this.onChangeCallback=e}set onChecked(e){this.onCheckedCallback=e}set onUnchecked(e){this.onUncheckedCallback=e}get elements(){return this.allElement}static destroyAll(){for(;m.instances.length;){m.instances[0].destroy()}}}var C=Object.freeze({__proto__:null});e.SwitchBox=m,e.SwitchBoxInterface=C}));
