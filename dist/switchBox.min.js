!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,i)=>"object"==typeof e?e:void 0===t&&void 0===i?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...i){const n=i.shift();if(!n)return t;if(e.isObject(t)&&e.isObject(n))for(const i in n)e.isObject(n[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],n[i])):Object.assign(t,{[i]:n[i]});return e.deepMerge(t,...i)},injectStylesheet(t,i){let n=document.createElement("style");n.id="switchbox-style"+i,n.appendChild(document.createTextNode("")),document.head.appendChild(n);let o=document.styleSheets[document.styleSheets.length-1];for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(o,n,e.buildRules(t[n]),i)},buildRules(e){let t="";for(let[i,n]of Object.entries(e))t+=`${i}:${n};`;return t},compatInsertRule(e,t,i,n){let o=t.replace(".switch-box",".switch-box-"+n);e.insertRule(o+"{"+i+"}",0)},removeStylesheet:function(t){let i=e.getElem("#switchbox-style"+t);i&&i.parentNode.removeChild(i)},getTemplate:function(e,t){return`\n        <div class="switch-box switch-box-${e}">\n            <label class="switch switch-${t}">\n                <span class="switch-style"></span>\n            </label>\n            <div class="switch-title">\n                <span></span>\n            </div>\n        </div>\n        `},getChecked:function(){return this.ele.checked}};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){if(!(this instanceof i))return new i(e,t);this.init(e,t,i.instance.length),this.onChecked=e=>{this.option.onChecked&&this.option.onChecked(e)},this.onUnchecked=e=>{this.option.onUnchecked&&this.option.onUnchecked(e)},this.onToggled=e=>{this.option.onToggled&&this.option.onToggled(e)},i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+i.version)}init(n,o,s){let l=e.getElem(n);if(l||t("Element not found"),"checkbox"!==l.type&&t("Element must be checkbox"),l.hasAttribute("data-switchbox"))return this;if(l.setAttribute("data-switchbox","true"),this.ele=l,this.id=s,this.option=e.deepMerge({},i.defaultOption,o),this.ele.checked?this.ele.setAttribute("checked","checked"):this.option.checked&&(this.ele.checked=!0,this.ele.setAttribute("checked","checked")),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,s)}let c=e.getTemplate(s,this.option.theme),h=document.createElement("div");h.innerHTML=c.trim();let d=e.getElem("label",h);d.insertBefore(this.ele.cloneNode(!0),d.firstChild),this.ele.parentNode.replaceChild(h.firstChild,this.ele);let r=e.getElem(`div.switch-box-${s} .switch-title`);if(null===this.option.title)r.parentNode.removeChild(r);else{e.getElem("span",r).textContent=this.option.title}return this.ele=e.getElem(n),this.ele.addEventListener("change",(e=>{const t=e.target.checked;e.target.setAttribute("checked",t?"checked":""),this.onToggled(e,t),t?this.onChecked(e):this.onUnchecked(e)})),this}destroy(){return this.ele.parentNode.removeChild(this.ele),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.1.0",i.instance=[],i.defaultOption={title:null,checked:!1,styles:{},theme:"blue"},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
