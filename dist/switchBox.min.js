!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,i)=>"object"==typeof e?e:void 0===t&&void 0===i?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...i){const n=i.shift();if(!n)return t;if(e.isObject(t)&&e.isObject(n))for(const i in n)e.isObject(n[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],n[i])):Object.assign(t,{[i]:n[i]});return e.deepMerge(t,...i)},injectStylesheet(t,i){let n=document.createElement("style");n.id="switchbox-style"+i,n.appendChild(document.createTextNode("")),document.head.appendChild(n);let o=document.styleSheets[document.styleSheets.length-1];for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(o,n,e.buildRules(t[n]),i)},buildRules(e){let t="";for(let[i,n]of Object.entries(e))t+=`${i}:${n};`;return t},compatInsertRule(e,t,i,n){let o=t.replace(".switch-box",".switch-box-"+n);e.insertRule(o+"{"+i+"}",0)},removeStylesheet(t){let i=e.getElem("#switchbox-style"+t);i&&i.parentNode.removeChild(i)},isEmpty:e=>!e?.length,createUniqueID:(e=8)=>Math.random().toString(36).substring(2,2+e),getTemplate:(e,t)=>`\n        <div class="switch-box switch-box-${e}">\n            <label class="switch switch-${t}">\n                <span class="switch-style"></span>\n            </label>\n            <div class="switch-title">\n                <span></span>\n            </div>\n        </div>\n        `,getChecked(){return this.ele.checked}};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){if(!(this instanceof i))return new i(e,t);this.init(e,t,i.instance.length),i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+i.version)}init(n,o,s){let c=e.getElem(n,"all");if(c.length<1&&t("Elements not found"),this.element=c,this.id=s,this.option=e.deepMerge({},i.defaultOption,o),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,s)}return this.onChecked=(e,t)=>{this.option.onChecked&&this.option.onChecked(e,t)},this.onUnchecked=(e,t)=>{this.option.onUnchecked&&this.option.onUnchecked(e,t)},this.onToggled=(e,t)=>{this.option.onToggled&&this.option.onToggled(e,t)},c.forEach(((i,n)=>{if("checkbox"!==i.type&&t("Element must be checkbox"),i.hasAttribute("data-switchbox"))return;i.setAttribute("data-switchbox","true");let o=i.nextElementSibling,s=null,l=this.option.labeled;o&&"LABEL"===o.tagName&&(s=!(e.isEmpty(i.name)||o.dataset.switchFor!==i.name&&o.htmlFor!==i.name)||!e.isEmpty(i.id)&&(o.htmlFor===i.id&&(l=!0),o.dataset.switchFor===i.id||o.htmlFor===i.id)||null,!0===s&&(s=o.textContent,o.parentNode.removeChild(o))),null===s&&(s=i.getAttribute("title")?i.getAttribute("title"):this.option.title),i.checked?i.setAttribute("checked","checked"):this.option.checked&&("boolean"==typeof this.option.checked&&1===c.length&&(i.checked=!0,i.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(i.name)||this.option.checked.includes(i.id))&&(i.checked=!0,i.setAttribute("checked","checked")));const h=e.createUniqueID(6);let d=e.getTemplate(h,this.option.theme),r=document.createElement("div");r.innerHTML=d.trim();let a=e.getElem("label",r),p=i.cloneNode(!0);a.insertBefore(p,a.firstChild),i.parentNode.replaceChild(r.firstElementChild,i);let u=e.getElem(`div.switch-box-${h} .switch-title`);if(null===s)u.parentNode.removeChild(u);else{e.getElem("span",u).textContent=s,l&&(u.classList.add("switch-box-labeled"),u.addEventListener("click",(e=>{e.preventDefault(),p.click()})))}p.addEventListener("change",(e=>{const t=e.target.checked;e.target.setAttribute("checked",t?"checked":""),this.onToggled(e,e.target),t?this.onChecked(e,e.target):this.onUnchecked(e,e.target)}))})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let i=e.parentNode;i.parentNode.replaceChild(e,i)})),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.2.2",i.instance=[],i.defaultOption={title:null,labeled:!0,checked:!1,styles:{},theme:"blue"},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
