!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.1.10";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,n){e.replaceRule.from=t,e.replaceRule.to=n}static getElem(e,t,n){return"object"==typeof e?e:void 0===t&&void 0===n?isNaN(Number(e))?document.querySelector(e):document.getElementById(e):null===t?void 0===n?document.querySelector(e):n.querySelector(e):"all"===t?void 0===n?document.querySelectorAll(e):n.querySelectorAll(e):"object"==typeof t?t.querySelector(e):null}static createElem(e,t={},n=""){let i=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("innerText"===e?i.textContent=t[e]:i.setAttribute(e,t[e]));return n&&i.append(document.createTextNode(n)),i}static insertAfter(t,n){if("string"==typeof n){let t=e.createElem("div");t.innerHTML=n,n=t.firstChild}t.nextSibling?t.parentNode.insertBefore(n,t.nextSibling):t.parentNode.appendChild(n)}static insertBefore(t,n){if("string"==typeof n){let t=e.createElem("div");t.innerHTML=n,n=t.firstChild}t.parentNode.insertBefore(n,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static deepMerge(t,...n){if(!n.length)return t;const i=n.shift();if(i)for(const n in i)e.isObject(i[n])?(t[n]||(t[n]={}),e.deepMerge(t[n],i[n])):t[n]=i[n];return e.deepMerge(t,...n)}static injectStylesheet(t,n=null){n=e.isEmpty(n)?"":n;let i=e.createElem("style");i.id=e.stylesheetId+n,i.textContent="",document.head.append(i);let o=i.sheet;for(let i in t)t.hasOwnProperty(i)&&e.compatInsertRule(o,i,e.buildRules(t[i]),n)}static buildRules(e){let t="";for(let[n,i]of Object.entries(e))n=n.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${n}:${i};`;return t}static compatInsertRule(t,n,i,o=null){o=e.isEmpty(o)?"":o;let s=n.replace(e.replaceRule.from,e.replaceRule.to+o);t.insertRule(s+"{"+i+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let n=e.getElem("#"+e.stylesheetId+t);n&&n.parentNode.removeChild(n)}static isEmpty(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}static createEvent(e,t=null){return new CustomEvent(e,{detail:t})}static dispatchEvent(t,n=null){document.dispatchEvent(e.createEvent(t,n))}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}static setLocalValue(e,t,n=!0){n&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}static getLocalValue(t,n=!0){let i=window.localStorage.getItem(t);if(n)try{i=JSON.parse(i)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return i}static removeLocalValue(e){window.localStorage.removeItem(e)}static setSessionValue(e,t,n=!0){n&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}static getSessionValue(t,n=!0){let i=window.sessionStorage.getItem(t);if(n)try{i=JSON.parse(i)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return i}static removeSessionValue(e){window.sessionStorage.removeItem(e)}static setCookie(t,n,i){let o=encodeURIComponent(t)+"="+encodeURIComponent(n)+";";const s={expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"};if((i=i?e.deepMerge({},s,i):s).expires){let t=null;if(i.expires instanceof Date)t=i.expires.toUTCString();else try{t=new Date(i.expires).toUTCString()}catch(t){e.reportError("Invalid date string for cookie expiration:",t)}o+="expires="+t+";"}i.path&&(o+="path="+i.path+";"),i.domain&&(o+="domain="+i.domain+";"),i.secure&&(o+="secure;"),i.sameSite&&(o+="SameSite="+i.sameSite+";"),document.cookie=o}static getCookie(e){const t=encodeURIComponent(e)+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return decodeURIComponent(i.substring(t.length,i.length))}return null}static deleteCookie(e){this.setCookie(e,"",{expires:new Date(0)})}static getUrlParameter(e,t=window.location.search){let n=new URLSearchParams(t).get(e);return null===n?null:decodeURIComponent(n)}static async doFetch(e){const{url:t,method:n="GET",headers:i={},body:o=null,beforeSend:s=null,success:r=null,error:l=null}=e;let a={method:n,mode:"cors",headers:i instanceof Headers?i:new Headers(i)};if(null!==o&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let e=o;o instanceof FormData||(e=JSON.stringify(o),a.headers instanceof Headers||(a.headers=new Headers(a.headers)),a.headers.append("Content-Type","application/json")),a.body=e}let c=new Request(t,a);try{const e=await new Promise((e=>{s?.(),e(c)})),t=await fetch(e),n=await t.json();return r?.(n),n}catch(e){throw l?.(e),e}}static appendFormData(t,n=new FormData){const{data:i,parentKey:o=""}=t;if(null!==i&&"object"==typeof i)if(i instanceof Blob||i instanceof File){const e=o||"file";n.append(e,i)}else Object.keys(i).forEach((t=>{const s=i[t],r=o?`${o}[${t}]`:t;null!==s&&"object"==typeof s?e.appendFormData({data:s,parentKey:r},n):null!==s&&n.append(r,String(s))}));else null!==i&&n.append(o,i);return n}static encodeFormData(t,n=""){if(t instanceof FormData)return t;const i={data:t,parentKey:n};return e.appendFormData(i)}static async sendFormData(t){const{url:n,data:i,method:o="POST",success:s,errorCallback:r}=t,l={url:n,method:o,body:e.encodeFormData(i),success:e=>{s&&s(e)},error:e=>{r&&r(e)}};return e.doFetch(l).then((()=>!0)).catch((()=>!1))}static reportError(...e){console.error(...e)}static throwError(e){throw new Error(e)}}Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e.setStylesheetId="switchbox-style",e.setReplaceRule(".switch-box",".switch-box-"),e.getTemplate=function(e,t){return`\n    <div class="switch-box switch-box-${e}">\n        <label class="switch switch-${t}">\n            <span class="switch-style"></span>\n        </label>\n        <div class="switch-title">\n            <span></span>\n        </div>\n    </div>\n    `},e.getChecked=function(){return this.ele.checked};let t=function(e){throw new Error(e)};class n{constructor(e,t={}){this.init(e,t,n.instance.length),n.instance.push(this),1===n.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+n.version)}init(i,o,s){let r=e.getElem(i,"all");if(r.length<1&&t("Elements not found"),this.element=r,this.id=s,this.option=e.deepMerge({},n.defaultOption,o),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,s)}return this.onChecked=(e,t)=>{this.option.onChecked&&this.option.onChecked(e,t)},this.onUnchecked=(e,t)=>{this.option.onUnchecked&&this.option.onUnchecked(e,t)},this.onToggled=(e,t)=>{this.option.onToggled&&this.option.onToggled(e,t)},r.forEach(((n,i)=>{if("checkbox"!==n.type&&t("Element must be checkbox"),n.hasAttribute("data-switchbox"))return;n.setAttribute("data-switchbox","true");let o=n.nextElementSibling,s=null,l=this.option.bindLabel;o&&"LABEL"===o.tagName&&(s=!(e.isEmpty(n.name)||o.dataset.switchFor!==n.name&&o.htmlFor!==n.name)||!e.isEmpty(n.id)&&(o.htmlFor===n.id&&(l=!0),o.dataset.switchFor===n.id||o.htmlFor===n.id)||null,!0===s&&(s=o.textContent,o.parentNode.removeChild(o))),null===s&&(s=1===r.length?this.option.title:null,!s&&n.title&&(s=n.title,n.removeAttribute("title"))),n.checked?n.setAttribute("checked","checked"):(this.option.checkedByValue&&Array.isArray(this.option.checkedByValue)&&this.option.checkedByValue.includes(n.value)&&(n.checked=!0,n.setAttribute("checked","checked")),this.option.checked&&("boolean"==typeof this.option.checked&&1===r.length&&(n.checked=!0,n.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(n.name)||this.option.checked.includes(n.id))&&(n.checked=!0,n.setAttribute("checked","checked")))),n.disabled?n.setAttribute("disabled","disabled"):this.option.disabled&&("boolean"==typeof this.option.disabled&&1===r.length&&(n.disabled=!0,n.setAttribute("disabled","disabled")),"string"==typeof this.option.disabled&&(this.option.disabled=[this.option.disabled]),Array.isArray(this.option.disabled)&&(this.option.disabled.includes(n.name)||this.option.disabled.includes(n.id))&&(n.disabled=!0,n.setAttribute("disabled","disabled")));const a=e.generateRandom(6);let c=e.getTemplate(this.id,this.option.theme),d=document.createElement("div");d.innerHTML=c.trim();let h=e.getElem("label",d),u=n.cloneNode(!0);u.dataset.uuid=a,h.insertBefore(u,h.firstChild),n.parentNode.replaceChild(d.firstElementChild,n);let p=e.getElem(`div.switch-box-${this.id} .switch-title`,h.parentNode);if(null===s)p.parentNode.removeChild(p);else{e.getElem("span",p).textContent=s,l&&(p.classList.add("switch-box-labeled"),p.addEventListener("click",(e=>{e.preventDefault(),u.click()})))}u.addEventListener("change",(e=>{const t=e.target.checked;t?e.target.setAttribute("checked","checked"):e.target.removeAttribute("checked"),this.onToggled(e,u),t?this.onChecked(e,e.target):this.onUnchecked(e,e.target)})),this.option.loaded&&this.option.loaded(u)})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let n=e.parentNode;n.parentNode.replaceChild(e,n)})),e.removeStylesheet(this.id),n.instance.splice(this.id,1),this}}return n.version="1.3.5",n.instance=[],n.defaultOption={title:null,bindLabel:!0,checked:!1,checkedByValue:!1,disabled:!1,styles:{},theme:"blue",loaded:null,onChecked:null,onUnchecked:null,onToggled:null},n.destroyAll=()=>{n.instance.forEach(((e,t)=>{e.destroy()})),n.instance=[]},n}));
