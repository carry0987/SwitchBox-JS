!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,n)=>"object"==typeof e?e:void 0===t&&void 0===n?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===n?document.querySelectorAll(e):n.querySelectorAll(e):"object"==typeof t&&void 0===n?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...n){const i=n.shift();if(!i)return t;if(e.isObject(t)&&e.isObject(i))for(const n in i)e.isObject(i[n])?(t[n]||Object.assign(t,{[n]:{}}),e.deepMerge(t[n],i[n])):Object.assign(t,{[n]:i[n]});return e.deepMerge(t,...n)},injectStylesheet(t,n){let i=document.createElement("style");i.id="switchbox-style"+n,i.appendChild(document.createTextNode("")),document.head.appendChild(i);let o=document.styleSheets[document.styleSheets.length-1];for(let i in t)t.hasOwnProperty(i)&&e.compatInsertRule(o,i,e.buildRules(t[i]),n)},buildRules(e){let t="";for(let[n,i]of Object.entries(e))t+=`${n}:${i};`;return t},compatInsertRule(e,t,n,i){let o=t.replace(".switch-box",".switch-box-"+i);e.insertRule(o+"{"+n+"}",0)},removeStylesheet(t){let n=e.getElem("#switchbox-style"+t);n&&n.parentNode.removeChild(n)},createUniqueID:(e=8)=>Math.random().toString(36).substring(2,2+e),getTemplate:(e,t)=>`\n        <div class="switch-box switch-box-${e}">\n            <label class="switch switch-${t}">\n                <span class="switch-style"></span>\n            </label>\n            <div class="switch-title">\n                <span></span>\n            </div>\n        </div>\n        `,getChecked(){return this.ele.checked}};let t=function(e){throw new Error(e)};class n{constructor(e,t={}){if(!(this instanceof n))return new n(e,t);this.init(e,t,n.instance.length),n.instance.push(this),1===n.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+n.version)}init(i,o,s){let c=e.getElem(i,"all");if(c.length<1&&t("Elements not found"),this.element=c,this.id=s,this.option=e.deepMerge({},n.defaultOption,o),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,s)}return this.onChecked=e=>{this.option.onChecked&&this.option.onChecked(e)},this.onUnchecked=e=>{this.option.onUnchecked&&this.option.onUnchecked(e)},this.onToggled=e=>{this.option.onToggled&&this.option.onToggled(e)},c.forEach(((n,i)=>{if("checkbox"!==n.type&&t("Element must be checkbox"),n.hasAttribute("data-switchbox"))return;n.setAttribute("data-switchbox","true");let o=n.nextElementSibling,s=null;o&&"LABEL"===o.tagName&&o.dataset.switchFor===n.name&&(s=o.textContent,o.parentNode.removeChild(o)),null===s&&(s=n.getAttribute("title")?n.getAttribute("title"):this.option.title),n.checked?n.setAttribute("checked","checked"):this.option.checked&&("boolean"==typeof this.option.checked&&1===c.length&&(n.checked=!0,n.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&this.option.checked.includes(n.name)&&(n.checked=!0,n.setAttribute("checked","checked")));const l=e.createUniqueID(6);let h=e.getTemplate(l,this.option.theme),d=document.createElement("div");d.innerHTML=h.trim();let r=e.getElem("label",d),a=n.cloneNode(!0);r.insertBefore(a,r.firstChild),n.parentNode.replaceChild(d.firstElementChild,n);let p=e.getElem(`div.switch-box-${l} .switch-title`);if(null===s)p.parentNode.removeChild(p);else{e.getElem("span",p).textContent=s,this.option.labeled&&(p.classList.add("switch-box-labeled"),p.addEventListener("click",(e=>{e.preventDefault(),a.click()})))}a.addEventListener("change",(e=>{const t=e.target.checked;e.target.setAttribute("checked",t?"checked":""),this.onToggled(e),t?this.onChecked(e):this.onUnchecked(e)}))})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let n=e.parentNode;n.parentNode.replaceChild(e,n)})),e.removeStylesheet(this.id),n.instance.splice(this.id,1),this}}return n.version="1.2.0",n.instance=[],n.defaultOption={title:null,labeled:!0,checked:!1,styles:{},theme:"blue"},n.destroyAll=()=>{n.instance.forEach(((e,t)=>{e.destroy()})),n.instance=[]},n}));
