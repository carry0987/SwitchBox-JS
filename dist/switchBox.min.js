!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.0.2";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,i){e.replaceRule.from=t,e.replaceRule.to=i}static getElem(e,t,i){return"object"==typeof e?e:void 0===t&&void 0===i?isNaN(Number(e))?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):null}static createElem(e,t={},i=""){let n=document.createElement(e);for(let e in t)t.hasOwnProperty(e)&&("innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return i&&n.append(document.createTextNode(i)),n}static insertAfter(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.nextSibling?t.parentNode.insertBefore(i,t.nextSibling):t.parentNode.appendChild(i)}static insertBefore(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.parentNode.insertBefore(i,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static deepMerge(t,...i){const n=i.shift();if(!n)return t;if(e.isObject(t)&&e.isObject(n))for(const i in n)e.isObject(n[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],n[i])):Object.assign(t,{[i]:n[i]});return e.deepMerge(t,...i)}static injectStylesheet(t,i=null){i=e.isEmpty(i)?"":i;let n=e.createElem("style");n.id=e.stylesheetId+i,n.textContent="",document.head.append(n);let s=n.sheet;for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(s,n,e.buildRules(t[n]),i)}static buildRules(e){let t="";for(let[i,n]of Object.entries(e))i=i.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${i}:${n};`;return t}static compatInsertRule(t,i,n,s=null){s=e.isEmpty(s)?"":s;let o=i.replace(e.replaceRule.from,e.replaceRule.to+s);t.insertRule(o+"{"+n+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let i=e.getElem("#"+e.stylesheetId+t);i&&i.parentNode.removeChild(i)}static isEmpty(e){return"number"!=typeof e&&!e?.length}static createEvent(e,t=null){return new CustomEvent(e,{detail:t})}static dispatchEvent(t,i=null){document.dispatchEvent(e.createEvent(t,i))}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}}Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e.setStylesheetId="switchbox-style",e.setReplaceRule(".switch-box",".switch-box-"),e.getTemplate=function(e,t){return`\n    <div class="switch-box switch-box-${e}">\n        <label class="switch switch-${t}">\n            <span class="switch-style"></span>\n        </label>\n        <div class="switch-title">\n            <span></span>\n        </div>\n    </div>\n    `},e.getChecked=function(){return this.ele.checked};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){this.init(e,t,i.instance.length),i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+i.version)}init(n,s,o){let c=e.getElem(n,"all");if(c.length<1&&t("Elements not found"),this.element=c,this.id=o,this.option=e.deepMerge({},i.defaultOption,s),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,o)}return this.onChecked=(e,t)=>{this.option.onChecked&&this.option.onChecked(e,t)},this.onUnchecked=(e,t)=>{this.option.onUnchecked&&this.option.onUnchecked(e,t)},this.onToggled=(e,t)=>{this.option.onToggled&&this.option.onToggled(e,t)},c.forEach(((i,n)=>{if("checkbox"!==i.type&&t("Element must be checkbox"),i.hasAttribute("data-switchbox"))return;i.setAttribute("data-switchbox","true");let s=i.nextElementSibling,o=null,l=this.option.bindLabel;s&&"LABEL"===s.tagName&&(o=!(e.isEmpty(i.name)||s.dataset.switchFor!==i.name&&s.htmlFor!==i.name)||!e.isEmpty(i.id)&&(s.htmlFor===i.id&&(l=!0),s.dataset.switchFor===i.id||s.htmlFor===i.id)||null,!0===o&&(o=s.textContent,s.parentNode.removeChild(s))),null===o&&(o=1===c.length?this.option.title:null,!o&&i.title&&(o=i.title,i.removeAttribute("title"))),i.checked?i.setAttribute("checked","checked"):(this.option.checkedByValue&&Array.isArray(this.option.checkedByValue)&&this.option.checkedByValue.includes(i.value)&&(i.checked=!0,i.setAttribute("checked","checked")),this.option.checked&&("boolean"==typeof this.option.checked&&1===c.length&&(i.checked=!0,i.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(i.name)||this.option.checked.includes(i.id))&&(i.checked=!0,i.setAttribute("checked","checked"))));const r=e.generateRandom(6);let a=e.getTemplate(this.id,this.option.theme),d=document.createElement("div");d.innerHTML=a.trim();let h=e.getElem("label",d),u=i.cloneNode(!0);u.dataset.uuid=r,h.insertBefore(u,h.firstChild),i.parentNode.replaceChild(d.firstElementChild,i);let p=e.getElem(`div.switch-box-${this.id} .switch-title`,h.parentNode);if(null===o)p.parentNode.removeChild(p);else{e.getElem("span",p).textContent=o,l&&(p.classList.add("switch-box-labeled"),p.addEventListener("click",(e=>{e.preventDefault(),u.click()})))}u.addEventListener("change",(e=>{const t=e.target.checked;t?e.target.setAttribute("checked","checked"):e.target.removeAttribute("checked"),this.onToggled(e,u),t?this.onChecked(e,e.target):this.onUnchecked(e,e.target)}))})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let i=e.parentNode;i.parentNode.replaceChild(e,i)})),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.3.2",i.instance=[],i.defaultOption={title:null,bindLabel:!0,checked:!1,checkedByValue:!1,styles:{},theme:"blue"},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
