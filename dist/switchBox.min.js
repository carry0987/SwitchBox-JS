!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";function e(e){throw new Error(e)}var t=Object.freeze({__proto__:null,reportError:function(...e){console.error(...e)},throwError:e});function i(e,t,i){if("string"!=typeof e)return e;let n=document;return null===t&&i?n=i:t&&t instanceof Node&&"querySelector"in t?n=t:i&&i instanceof Node&&"querySelector"in i&&(n=i),"all"===t?n.querySelectorAll(e):n.querySelector(e)}function n(e,t={},i=""){let n=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return i&&(n.textContent=i),n}var o=Object.freeze({__proto__:null,addClass:function(e,t){return e.classList.add(t),e},createElem:n,getElem:i,hasClass:function(e,t){return e.classList.contains(t)},insertAfter:function(t,i){if("string"==typeof i){let t=n("div");t.innerHTML=i,(i=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(i,t.nextSibling)},insertBefore:function(t,i){if("string"==typeof i){let t=n("div");t.innerHTML=i,(i=t.firstChild)||e("The new node (string) provided did not produce a valid DOM element.")}t.parentNode.insertBefore(i,t)},removeClass:function(e,t){return e.classList.remove(t),e},toggleClass:function(e,t){return e.classList.toggle(t),e}});let s="utils-style";const l={from:".utils",to:".utils-"};function r(e,...t){if(!t.length)return e;const i=t.shift();if(i)for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const o=i[t],s=t;"object"!=typeof(n=o)||null===n||Array.isArray(n)?e[s]=o:(e[s]&&"object"==typeof e[s]||(e[s]={}),r(e[s],o))}var n;return r(e,...t)}function c(e){s=e}function d(e,t){l.from=e,l.to=t}function a(e,t=null){t=f(t)?"":t;let i=n("style");i.id=s+t,i.textContent="",document.head.append(i);let o=i.sheet;for(let i in e)e.hasOwnProperty(i)&&u(o,i,h(e[i]),t)}function h(e){let t="";for(let[i,n]of Object.entries(e))i=i.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${i}:${n};`;return t}function u(e,t,i,n=null){n=f(n)?"":n;let o=t.replace(l.from,l.to+n);e.insertRule(o+"{"+i+"}",0)}function p(e=null){e=f(e)?"":e;let t=i("#"+s+e);t&&t.parentNode.removeChild(t)}function f(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}function b(e=8){return Math.random().toString(36).substring(2,2+e)}class g{static setStylesheetId=c;static setReplaceRule=d;static isEmpty=f;static deepMerge=r;static generateRandom=b;static injectStylesheet=a;static removeStylesheet=p;static getElem=o.getElem;static throwError=t.throwError;static getTemplate=function(e,t){return`\n        <div class="switch-box switch-box-${e}">\n            <label class="switch switch-${t}">\n                <span class="switch-style"></span>\n            </label>\n            <div class="switch-title">\n                <span></span>\n            </div>\n        </div>\n        `};static getChecked=function(){return this.ele.checked}}g.setStylesheetId("switchbox-style"),g.setReplaceRule(".switch-box",".switch-box-");class y{constructor(e,t={}){this.init(e,t,y.instance.length),y.instance.push(this),1===y.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+y.version)}init(e,t,i){let n=g.getElem(e,"all");if(n.length<1&&g.throwError("Elements not found"),this.element=n,this.id=i,this.option=g.deepMerge({},y.defaultOption,t),this.option?.styles&&Object.keys(this.option.styles).length>0){let e=g.deepMerge({},this.option.styles);g.injectStylesheet(e,i)}return this.onChecked=(e,t)=>{this.option.onChecked&&this.option.onChecked(e,t)},this.onUnchecked=(e,t)=>{this.option.onUnchecked&&this.option.onUnchecked(e,t)},this.onToggled=(e,t)=>{this.option.onToggled&&this.option.onToggled(e,t)},n.forEach(((e,t)=>{if("checkbox"!==e.type&&g.throwError("Element must be checkbox"),e.hasAttribute("data-switchbox"))return;e.setAttribute("data-switchbox","true");let i=e.nextElementSibling,o=null,s=this.option.bindLabel;i&&"LABEL"===i.tagName&&(o=!(g.isEmpty(e.name)||i.dataset.switchFor!==e.name&&i.htmlFor!==e.name)||!g.isEmpty(e.id)&&(i.htmlFor===e.id&&(s=!0),i.dataset.switchFor===e.id||i.htmlFor===e.id)||null,!0===o&&(o=i.textContent,i.parentNode.removeChild(i))),null===o&&(o=1===n.length?this.option.title:null,!o&&e.title&&(o=e.title,e.removeAttribute("title"))),e.checked?e.setAttribute("checked","checked"):(this.option.checkedByValue&&Array.isArray(this.option.checkedByValue)&&this.option.checkedByValue.includes(e.value)&&(e.checked=!0,e.setAttribute("checked","checked")),this.option.checked&&("boolean"==typeof this.option.checked&&1===n.length&&(e.checked=!0,e.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(e.name)||this.option.checked.includes(e.id))&&(e.checked=!0,e.setAttribute("checked","checked")))),e.disabled?e.setAttribute("disabled","disabled"):(this.option.disabledByValue&&Array.isArray(this.option.disabledByValue)&&this.option.disabledByValue.includes(e.value)&&(e.disabled=!0,e.setAttribute("disabled","disabled")),this.option.disabled&&("boolean"==typeof this.option.disabled&&1===n.length&&(e.disabled=!0,e.setAttribute("disabled","disabled")),"string"==typeof this.option.disabled&&(this.option.disabled=[this.option.disabled]),Array.isArray(this.option.disabled)&&(this.option.disabled.includes(e.name)||this.option.disabled.includes(e.id))&&(e.disabled=!0,e.setAttribute("disabled","disabled"))));const l=g.generateRandom(6);let r=g.getTemplate(this.id,this.option.theme),c=document.createElement("div");c.innerHTML=r.trim();let d=g.getElem("label",c),a=e.cloneNode(!0);a.dataset.uuid=l,d.insertBefore(a,d.firstChild),e.parentNode.replaceChild(c.firstElementChild,e);let h=g.getElem(`div.switch-box-${this.id} .switch-title`,d.parentNode);if(null===o)h.parentNode.removeChild(h);else{g.getElem("span",h).textContent=o,s&&(h.classList.add("switch-box-labeled"),h.addEventListener("click",(e=>{e.preventDefault(),a.click()})))}a.addEventListener("change",(e=>{const t=e.target.checked;t?e.target.setAttribute("checked","checked"):e.target.removeAttribute("checked"),this.onToggled(e,a),t?this.onChecked(e,e.target):this.onUnchecked(e,e.target)})),this.option.loaded&&this.option.loaded(a)})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let i=e.parentNode;i.parentNode.replaceChild(e,i)})),g.removeStylesheet(this.id),y.instance.splice(this.id,1),this}}return y.version="1.3.7",y.instance=[],y.defaultOption={title:null,bindLabel:!0,checked:!1,checkedByValue:!1,disabled:!1,disabledByValue:!1,styles:{},theme:"blue",loaded:null,onChecked:null,onUnchecked:null,onToggled:null},y.destroyAll=()=>{y.instance.forEach(((e,t)=>{e.destroy()})),y.instance=[]},y}));
