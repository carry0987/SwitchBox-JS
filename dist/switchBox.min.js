!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";class e{constructor(e){Object.assign(this,e)}static version="2.1.10";static stylesheetId="utils-style";static replaceRule={from:".utils",to:".utils-"};static setStylesheetId(t){e.stylesheetId=t}static setReplaceRule(t,i){e.replaceRule.from=t,e.replaceRule.to=i}static getElem(e,t,i){return"object"==typeof e?e:void 0===t&&void 0===i?isNaN(Number(e))?document.querySelector(e):document.getElementById(e):null===t?void 0===i?document.querySelector(e):i.querySelector(e):"all"===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t?t.querySelector(e):null}static createElem(e,t={},i=""){let n=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("innerText"===e?n.textContent=t[e]:n.setAttribute(e,t[e]));return i&&n.append(document.createTextNode(i)),n}static insertAfter(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.nextSibling?t.parentNode.insertBefore(i,t.nextSibling):t.parentNode.appendChild(i)}static insertBefore(t,i){if("string"==typeof i){let t=e.createElem("div");t.innerHTML=i,i=t.firstChild}t.parentNode.insertBefore(i,t)}static addClass(e,t){return e.classList.add(t),e}static removeClass(e,t){return e.classList.remove(t),e}static toggleClass(e,t){return e.classList.toggle(t),e}static hasClass(e,t){return e.classList.contains(t)}static isObject(e){return e&&"object"==typeof e&&!Array.isArray(e)}static deepMerge(t,...i){if(!i.length)return t;const n=i.shift();if(n)for(const i in n)e.isObject(n[i])?(t[i]||(t[i]={}),e.deepMerge(t[i],n[i])):t[i]=n[i];return e.deepMerge(t,...i)}static injectStylesheet(t,i=null){i=e.isEmpty(i)?"":i;let n=e.createElem("style");n.id=e.stylesheetId+i,n.textContent="",document.head.append(n);let s=n.sheet;for(let n in t)t.hasOwnProperty(n)&&e.compatInsertRule(s,n,e.buildRules(t[n]),i)}static buildRules(e){let t="";for(let[i,n]of Object.entries(e))i=i.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),t+=`${i}:${n};`;return t}static compatInsertRule(t,i,n,s=null){s=e.isEmpty(s)?"":s;let o=i.replace(e.replaceRule.from,e.replaceRule.to+s);t.insertRule(o+"{"+n+"}",0)}static removeStylesheet(t=null){t=e.isEmpty(t)?"":t;let i=e.getElem("#"+e.stylesheetId+t);i&&i.parentNode.removeChild(i)}static isEmpty(e){return"number"!=typeof e&&(!e||"string"==typeof e&&0===e.length)}static createEvent(e,t=null){return new CustomEvent(e,{detail:t})}static dispatchEvent(t,i=null){document.dispatchEvent(e.createEvent(t,i))}static generateRandom(e=8){return Math.random().toString(36).substring(2,2+e)}static setLocalValue(e,t,i=!0){i&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)}static getLocalValue(t,i=!0){let n=window.localStorage.getItem(t);if(i)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeLocalValue(e){window.localStorage.removeItem(e)}static setSessionValue(e,t,i=!0){i&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}static getSessionValue(t,i=!0){let n=window.sessionStorage.getItem(t);if(i)try{n=JSON.parse(n)}catch(t){e.reportError("Error while parsing stored json value: ",t)}return n}static removeSessionValue(e){window.sessionStorage.removeItem(e)}static setCookie(t,i,n){let s=encodeURIComponent(t)+"="+encodeURIComponent(i)+";";const o={expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"};if((n=n?e.deepMerge({},o,n):o).expires){let t=null;if(n.expires instanceof Date)t=n.expires.toUTCString();else try{t=new Date(n.expires).toUTCString()}catch(t){e.reportError("Invalid date string for cookie expiration:",t)}s+="expires="+t+";"}n.path&&(s+="path="+n.path+";"),n.domain&&(s+="domain="+n.domain+";"),n.secure&&(s+="secure;"),n.sameSite&&(s+="SameSite="+n.sameSite+";"),document.cookie=s}static getCookie(e){const t=encodeURIComponent(e)+"=",i=document.cookie.split(";");for(let e=0;e<i.length;e++){let n=i[e];for(;" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(t))return decodeURIComponent(n.substring(t.length,n.length))}return null}static deleteCookie(e){this.setCookie(e,"",{expires:new Date(0)})}static getUrlParameter(e,t=window.location.search){let i=new URLSearchParams(t).get(e);return null===i?null:decodeURIComponent(i)}static async doFetch(e){const{url:t,method:i="GET",headers:n={},body:s=null,beforeSend:o=null,success:r=null,error:l=null}=e;let a={method:i,mode:"cors",headers:n instanceof Headers?n:new Headers(n)};if(null!==s&&["PUT","POST","DELETE"].includes(i.toUpperCase())){let e=s;s instanceof FormData||(e=JSON.stringify(s),a.headers instanceof Headers||(a.headers=new Headers(a.headers)),a.headers.append("Content-Type","application/json")),a.body=e}let c=new Request(t,a);try{const e=await new Promise((e=>{o?.(),e(c)})),t=await fetch(e),i=await t.json();return r?.(i),i}catch(e){throw l?.(e),e}}static appendFormData(t,i=new FormData){const{data:n,parentKey:s=""}=t;if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=s||"file";i.append(e,n)}else Object.keys(n).forEach((t=>{const o=n[t],r=s?`${s}[${t}]`:t;null!==o&&"object"==typeof o?e.appendFormData({data:o,parentKey:r},i):null!==o&&i.append(r,String(o))}));else null!==n&&i.append(s,n);return i}static encodeFormData(t,i=""){if(t instanceof FormData)return t;const n={data:t,parentKey:i};return e.appendFormData(n)}static async sendFormData(t){const{url:i,data:n,method:s="POST",success:o,errorCallback:r}=t,l={url:i,method:s,body:e.encodeFormData(n),success:e=>{o&&o(e)},error:e=>{r&&r(e)}};return e.doFetch(l).then((()=>!0)).catch((()=>!1))}static reportError(...e){console.error(...e)}static throwError(e){throw new Error(e)}}Object.defineProperty(e,"version",{writable:!1,configurable:!0}),e.setStylesheetId="switchbox-style",e.setReplaceRule(".switch-box",".switch-box-"),e.getTemplate=function(e,t){return`\n    <div class="switch-box switch-box-${e}">\n        <label class="switch switch-${t}">\n            <span class="switch-style"></span>\n        </label>\n        <div class="switch-title">\n            <span></span>\n        </div>\n    </div>\n    `},e.getChecked=function(){return this.ele.checked};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){this.init(e,t,i.instance.length),i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+i.version)}init(n,s,o){let r=e.getElem(n,"all");if(r.length<1&&t("Elements not found"),this.element=r,this.id=o,this.option=e.deepMerge({},i.defaultOption,s),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,o)}return this.onChecked=(e,t)=>{this.option.onChecked&&this.option.onChecked(e,t)},this.onUnchecked=(e,t)=>{this.option.onUnchecked&&this.option.onUnchecked(e,t)},this.onToggled=(e,t)=>{this.option.onToggled&&this.option.onToggled(e,t)},r.forEach(((i,n)=>{if("checkbox"!==i.type&&t("Element must be checkbox"),i.hasAttribute("data-switchbox"))return;i.setAttribute("data-switchbox","true");let s=i.nextElementSibling,o=null,l=this.option.bindLabel;s&&"LABEL"===s.tagName&&(o=!(e.isEmpty(i.name)||s.dataset.switchFor!==i.name&&s.htmlFor!==i.name)||!e.isEmpty(i.id)&&(s.htmlFor===i.id&&(l=!0),s.dataset.switchFor===i.id||s.htmlFor===i.id)||null,!0===o&&(o=s.textContent,s.parentNode.removeChild(s))),null===o&&(o=1===r.length?this.option.title:null,!o&&i.title&&(o=i.title,i.removeAttribute("title"))),i.checked?i.setAttribute("checked","checked"):(this.option.checkedByValue&&Array.isArray(this.option.checkedByValue)&&this.option.checkedByValue.includes(i.value)&&(i.checked=!0,i.setAttribute("checked","checked")),this.option.checked&&("boolean"==typeof this.option.checked&&1===r.length&&(i.checked=!0,i.setAttribute("checked","checked")),"string"==typeof this.option.checked&&(this.option.checked=[this.option.checked]),Array.isArray(this.option.checked)&&(this.option.checked.includes(i.name)||this.option.checked.includes(i.id))&&(i.checked=!0,i.setAttribute("checked","checked")))),i.disabled?i.setAttribute("disabled","disabled"):(this.option.disabledByValue&&Array.isArray(this.option.disabledByValue)&&this.option.disabledByValue.includes(i.value)&&(i.disabled=!0,i.setAttribute("disabled","disabled")),this.option.disabled&&("boolean"==typeof this.option.disabled&&1===r.length&&(i.disabled=!0,i.setAttribute("disabled","disabled")),"string"==typeof this.option.disabled&&(this.option.disabled=[this.option.disabled]),Array.isArray(this.option.disabled)&&(this.option.disabled.includes(i.name)||this.option.disabled.includes(i.id))&&(i.disabled=!0,i.setAttribute("disabled","disabled"))));const a=e.generateRandom(6);let c=e.getTemplate(this.id,this.option.theme),d=document.createElement("div");d.innerHTML=c.trim();let h=e.getElem("label",d),u=i.cloneNode(!0);u.dataset.uuid=a,h.insertBefore(u,h.firstChild),i.parentNode.replaceChild(d.firstElementChild,i);let p=e.getElem(`div.switch-box-${this.id} .switch-title`,h.parentNode);if(null===o)p.parentNode.removeChild(p);else{e.getElem("span",p).textContent=o,l&&(p.classList.add("switch-box-labeled"),p.addEventListener("click",(e=>{e.preventDefault(),u.click()})))}u.addEventListener("change",(e=>{const t=e.target.checked;t?e.target.setAttribute("checked","checked"):e.target.removeAttribute("checked"),this.onToggled(e,u),t?this.onChecked(e,e.target):this.onUnchecked(e,e.target)})),this.option.loaded&&this.option.loaded(u)})),this}destroy(){return this.element.forEach(((e,t)=>{e.removeAttribute("data-switchbox"),e.removeAttribute("checked"),e.removeEventListener("change",this.onChecked),e.removeEventListener("change",this.onUnchecked),e.removeEventListener("change",this.onToggled);let i=e.parentNode;i.parentNode.replaceChild(e,i)})),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.3.6",i.instance=[],i.defaultOption={title:null,bindLabel:!0,checked:!1,checkedByValue:!1,disabled:!1,disabledByValue:!1,styles:{},theme:"blue",loaded:null,onChecked:null,onUnchecked:null,onToggled:null},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
