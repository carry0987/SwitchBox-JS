!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SwitchBox=t()}(this,(function(){"use strict";const e={getElem:(e,t,i)=>"object"==typeof e?e:void 0===t&&void 0===i?isNaN(1*e)?document.querySelector(e):document.getElementById(e):"all"===t||null===t?void 0===i?document.querySelectorAll(e):i.querySelectorAll(e):"object"==typeof t&&void 0===i?t.querySelector(e):void 0,isObject:e=>e&&"object"==typeof e&&!Array.isArray(e),deepMerge(t,...i){if(!i.length)return t;const s=i.shift();if(e.isObject(t)&&e.isObject(s))for(const i in s)e.isObject(s[i])?(t[i]||Object.assign(t,{[i]:{}}),e.deepMerge(t[i],s[i])):Object.assign(t,{[i]:s[i]});return e.deepMerge(t,...i)},injectStylesheet(t,i){let s=document.createElement("style");s.id="switchbox-style"+i,s.appendChild(document.createTextNode("")),document.head.appendChild(s);let n=document.styleSheets[document.styleSheets.length-1];for(let s in t)t.hasOwnProperty(s)&&e.compatInsertRule(n,s,e.buildRules(t[s]),i)},buildRules(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t+=i+":"+e[i]+";");return t},compatInsertRule(e,t,i,s){let n=t.replace(".switch-box",".switch-box-"+s);e.insertRule(n+"{"+i+"}",0)},removeStylesheet:function(t){let i=e.getElem("#switchbox-style"+t);i&&i.parentNode.removeChild(i)},getTemplate:function(e,t){return`\n        <div class="switch-box switch-box-${e}">\n            <label class="switch switch-${t}">\n                <span class="switch-style"></span>\n            </label>\n            <div class="switch-title">\n                <span></span>\n            </div>\n        </div>\n        `}};let t=function(e){throw new Error(e)};class i{constructor(e,t={}){if(!(this instanceof i))return new i(e,t);this.init(e,t,i.instance.length),i.instance.push(this),1===i.instance.length&&function(e,t=!1){!0===t?console.log("Data Type : "+typeof e,"\nValue : "+e):"boolean"!=typeof t?console.log(t):console.log(e)}("SwitchBox is loaded, version:"+i.version)}init(s,n,l){let o=e.getElem(s);if(o||t("Element not found"),"checkbox"!==o.type&&t("Element must be checkbox"),o.hasAttribute("data-switchbox"))return this;if(o.setAttribute("data-switchbox","true"),this.ele=o,this.id=l,this.option=e.deepMerge({},i.defaultOption,n),this.ele.checked?this.ele.setAttribute("checked","checked"):this.option.checked&&(this.ele.checked=!0,this.ele.setAttribute("checked","checked")),this.option?.styles&&Object.keys(this.option.styles).length>0){let t=e.deepMerge({},this.option.styles);e.injectStylesheet(t,l)}let c=e.getTemplate(l,this.option.theme),r=document.createElement("div");r.innerHTML=c.trim();let h=e.getElem("label",r);h.insertBefore(this.ele.cloneNode(!0),h.firstChild),this.ele.parentNode.replaceChild(r.firstChild,this.ele);let d=e.getElem(`div.switch-box-${l} .switch-title`);if(null===this.option.title)d.parentNode.removeChild(d);else{e.getElem("span",d).textContent=this.option.title}return this.ele=e.getElem(s),this.ele.addEventListener("click",(e=>{const t=e.target.checked;e.target.setAttribute("checked",t)})),this}destroy(){return this.ele.parentNode.removeChild(this.ele),e.removeStylesheet(this.id),i.instance.splice(this.id,1),this}}return i.version="1.0.0",i.instance=[],i.defaultOption={title:null,checked:!1,styles:{},theme:"blue"},i.destroyAll=()=>{i.instance.forEach(((e,t)=>{e.destroy()})),i.instance=[]},i}));
